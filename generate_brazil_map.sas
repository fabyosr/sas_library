
DATA TMP_DADOS;
INFILE DATALINES DLM=',';
INPUT ID_SAS UF $ QTDE $ FAIXA ;
DATALINES; 
1,AC,2.2K,1
2,AL,4.6K,2
3,AP,1.1K,1
4,AM,3.2K,2
5,BA,38.8K,4
6,DF,19.3K,3
7,CE,19.6K,3
8,ES,12.2K,2
9,GO,29.1K,3
10,MA,13.3K,2
11,MT,10.8K,2
12,MS,7.4K,2
13,MG,175.1K,5
14,PA,10.5K,2
15,PB,10.2K,2
16,PR,35.3K,4
17,PE,23.3K,3
18,PI,5.1K,2
19,RJ,76.2K,5
20,RN,7.1K,2
21,RS,30.3K,3
22,RO,4.9K,2
23,RR,0.7K,1
24,SC,24K,3
25,SP,47.2K,4
26,SE,3.1K,2
27,TO,5.5K,2
;
PROC SQL; * PREPARAR TABELA DE MAPA

* RELACIONA TABELA DE DADOS COM TABELAS DE MAPAS DO BRASIL;
CREATE TABLE TMP_DADOS_BRASIL AS 
SELECT *
FROM TMP_DADOS A
LEFT JOIN MAPS.BRAZIL2 B ON B.ID = A.ID_SAS;

* CRIA BASE DE LABELS A ESCREVER NO MAPA;
CREATE TABLE TMP_GRAF_MAP_LABEL AS
SELECT QTDE AS TEXT,
       '2' AS XSYS,
       '2' AS YSYS,
       '3' AS HSYS,
       '5' AS POSITION,
       'LABEL' AS FUNCTION,
       2 AS SIZE,
       "'ALBANY AMT/BOLD'" AS STYLE,
       'A' AS WHEN ,
       A.MID_X AS X,
       A.MID_Y AS Y
FROM TMP_DADOS_BRASIL A;

QUIT;

* CONFIGURANDO GRÁFICO ;
GOPTIONS RESET=ALL GSFNAME=GRAFOUT GSFMODE=REPLACE DEVICE=PNG XPIXELS=800 YPIXELS=600;
LEGEND1 MODE=SHARE ORIGIN=(5,5) ACROSS=1 SHAPE=BAR(3,4)PCT LABEL=( POSITION=TOP FONT='MICROSOFT SANS SERIF' HEIGHT=12PT "TOTAL DE CONTESTAÇÕES");
TITLE 'VOLUME DE RECLAMAÇÕES';

* CONFIGURANDO PADRÕES DE CORES;
PATTERN5 V=S C=CXFF6D00;
PATTERN4 V=S C=CXFF9A4D;
PATTERN3 V=S C=CXFFB780;
PATTERN2 V=S C=CXFFD4B3;
PATTERN1 V=S C=CXFFF1E6;

* GERANDO MAPA;
PROC GMAP DATA=TMP_DADOS_BRASIL MAP=MAPS.BRAZIL;
ID ID;
CHORO FAIXA / DISCRETE LEVELS=5 COUTLINE=ORANGE NOLEGEND /* LEGEND=LEGEND1 */ ANNOTATE=TMP_GRAF_MAP_LABEL;
RUN;
